# Заметки по докеру
## Сервер/Движок/Daemon
Это фоновый процесс, который непосредственно управляет контейнерами. Именно демон создает, разворачивает и запускает контейнеры.
## Клиент
Программа-интерфейс для командной строки, с которой взаимодействует пользователь.
## Компоненты:
- **Dockerfile**
Это файл для предварительной работы, набор инструкций, который нужен для записи образа. В нем описывается, что должно находиться в образе, какие команды, зависимости и процессы он будет содержать.<br>
- **Образ Docker (Docker Image)**<br>
Это образ — неизменяемый файл, из которого разворачивается контейнер.
- **Docker Registry**<br>
Это реестр, или репозиторий — открытая или закрытая база образов.
- **Контейнер Docker (Docker Container)**<br>
Это уже готовый и развернутый контейнер, который находится на каком-либо устройстве.
- **Тома хранения данных (docker volumes)**<br>
Тома — рекомендуемый разработчиками Docker способ хранения данных. Один том может быть примонтирован одновременно в несколько контейнеров. Когда никто не использует том, он не удаляется, а продолжает существовать.<br>
Для чего стоит использовать тома в Docker:
    - шаринг данных между несколькими запущенными контейнерами,
    - решение проблемы привязки к ОС хоста,
    - удалённое хранение данных,
    - бэкап или миграция данных на другой хост с Docker (для этого надо остановить все контейнеры и скопировать содержимое из каталога тома в нужное место).
- **Монтирование каталогов с хоста (bind mount)**<br>
Это более простая концепция: файл или каталог с хоста просто монтируется в контейнер.<br>
Особенности bind mount:
    - Запись в примонтированный каталог могут вести программы как в контейнере, так и на хосте. Это значит, есть риск случайно затереть данные, не понимая, что с ними работает контейнер.
    - Лучше не использовать в продакшене. Для продакшена убедитесь, что код копируется в контейнер, а не монтируется с хоста.
    - Для успешного монтирования указывайте полный путь к файлу или каталогу на хосте.
    - Если приложение в контейнере запущено от root, а совместно используется каталог с ограниченными правами, то в какой-то момент может возникнуть проблема с правами на файлы и невозможность что-то удалить без использования sudo.
